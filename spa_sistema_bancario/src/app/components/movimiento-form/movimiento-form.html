<form [formGroup]="movimientoForm" (ngSubmit)="onSubmit()" class="movimiento-form">
  <div class="form-group">
    <label for="numeroCuenta" class="form-label">
      Número de Cuenta <span class="form-required">*</span>
    </label>
    <input
      id="numeroCuenta"
      type="text"
      formControlName="numeroCuenta"
      class="form-input"
      [class.form-input--error]="isFieldInvalid('numeroCuenta')"
      placeholder="Ej: 478758"
      maxlength="10"
    />
    <div *ngIf="isFieldInvalid('numeroCuenta')" class="form-error">
      {{ getFieldError('numeroCuenta') }}
    </div>
  </div>

  <div class="form-group">
    <label class="form-label">
      Tipo de Operación <span class="form-required">*</span>
    </label>
    <div class="operation-selector">
      <label class="operation-option">
        <input
          type="radio"
          formControlName="tipoOperacion"
          value="credito"
          class="operation-radio"
        />
        <span class="operation-card operation-card--credit">
          <span class="operation-icon"><i class="material-icons">trending_up</i></span>
          <span class="operation-title">Depósito</span>
          <span class="operation-symbol">+</span>
        </span>
      </label>
      
      <label class="operation-option">
        <input
          type="radio"
          formControlName="tipoOperacion"
          value="debito"
          class="operation-radio"
        />
        <span class="operation-card operation-card--debit">
          <span class="operation-icon"><i class="material-icons">trending_down</i></span>
          <span class="operation-title">Retiro</span>
          <span class="operation-symbol">-</span>
        </span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label for="valor" class="form-label">
      Valor del {{ getTipoOperacion() }} <span class="form-required">*</span>
    </label>
    <div class="valor-input-container">
      <span class="valor-symbol" [ngClass]="movimientoForm.get('tipoOperacion')?.value === 'credito' ? 'valor-symbol--positive' : 'valor-symbol--negative'">
        {{ getTipoOperacionSymbol() }}
      </span>
      <input
        id="valor"
        type="number"
        formControlName="valor"
        class="form-input form-input--with-symbol"
        [class.form-input--error]="isFieldInvalid('valor')"
        placeholder="0.00"
        min="0.01"
        step="0.01"
      />
    </div>
    <div class="form-hint">
      <span class="form-hint-icon"><i class="material-icons">lightbulb</i></span>
      <span>Solo ingrese el valor numérico, el símbolo se agrega automáticamente</span>
    </div>
    <div *ngIf="movimientoForm.get('valor')?.value > 0" class="form-preview">
      <span class="preview-label">Valor final:</span>
      <span class="preview-value" [ngClass]="movimientoForm.get('tipoOperacion')?.value === 'credito' ? 'preview-value--positive' : 'preview-value--negative'">
        {{ getValorConSimbolo() | currency:'USD':'symbol':'1.2-2' }}
      </span>
    </div>
    <div *ngIf="isFieldInvalid('valor')" class="form-error">
      {{ getFieldError('valor') }}
    </div>
  </div>

  <div class="form-actions">
    <button 
      type="button" 
      class="btn btn--outline"
      (click)="onCancel()"
      [disabled]="isSubmitting"
    >
      Cancelar
    </button>
    <button
      type="submit" 
      class="btn btn--primary"
      [disabled]="!movimientoForm.valid || isSubmitting"
    >
      <span *ngIf="isSubmitting" class="btn-spinner">⌛</span>
      Realizar {{ getTipoOperacion() }}
    </button>
  </div>
</form>
